import{defineConfig as r,renderStudio as l}from"sanity";import{structureTool as s}from"sanity/structure";import{visionTool as p}from"@sanity/vision";const m={name:"blog",title:"Blog",type:"document",fields:[{name:"title",title:"Title",type:"string"},{name:"slug",title:"Slug",type:"slug",options:{source:"title",maxLength:96}},{name:"author",title:"Author",type:"reference",to:{type:"author"}},{name:"mainImage",title:"Main image",type:"mainImage"},{name:"categories",title:"Categories",type:"array",of:[{type:"reference",to:{type:"category"}}]},{name:"publishedAt",title:"Published at",type:"datetime"},{name:"body",title:"Body",type:"blockContent"},{name:"featured",title:"Featured",type:"boolean",description:"Set as featured blog. Only one blog can be featured at a time."},{name:"tags",title:"Tags",type:"array",of:[{type:"string"}],description:"Add multiple tags for this blog post",options:{layout:"tags"}},{name:"titleDescription",title:"Title Description",type:"text",description:"A short description of the blog title (Max: 100 words)",validation:t=>t.required().custom(e=>e?e.trim().split(/\s+/).length<=100?!0:"Title description must not exceed 100 words":!0)},{name:"catalog",title:"Catalog",type:"array",of:[{type:"string"}],description:"Add multiple tags for this blog post",options:{layout:"tags"}}],preview:{select:{title:"title",type:"type",media:"mainImage"},prepare({title:t,type:e,media:i}){return{title:t,subtitle:e,media:i}}},__experimental_actions:["create","update","delete","publish"],async beforeUpdate({patch:t,documentId:e,schemaType:i}){if(i==="blog"&&t.set&&t.set.featured===!0){const o=require("part:@sanity/base/client").default,a='*[_type == "blog" && featured == true && _id != $documentId]',n={documentId:e};if((await o.fetch(a,n)).length>0)throw new Error("Only one blog can be featured at a time.")}}},g={name:"author",title:"Author",type:"document",fields:[{name:"name",title:"Name",type:"string"},{name:"bio",title:"Bio",type:"text"},{name:"image",title:"Image",type:"image"}]},d={name:"mainImage",title:"Main Image",type:"image",options:{hotspot:!0},fields:[{name:"caption",title:"Caption",type:"string"},{name:"alt",title:"Alt Text",type:"string"}]},c={name:"category",title:"Category",type:"document",fields:[{name:"title",title:"Title",type:"string"},{name:"description",title:"Description",type:"text"}]},u={name:"blockContent",title:"Block Content",type:"array",of:[{type:"block"},{type:"image",fields:[{name:"caption",title:"Caption",type:"string",options:{isHighlighted:!0}},{name:"alt",title:"Alt Text",type:"string"}]}]},y=[m,g,d,c,u],f=r({name:"default",title:"Instagram Resource Downloader",projectId:"n9195iq3",dataset:"production",plugins:[s(),p()],schema:{types:y}});l(document.getElementById("sanity"),f,{reactStrictMode:!1,basePath:"/"});
